version: '3.8'

services:
  daily-update:
    build:
      context: .
      dockerfile: Dockerfile.daily_update
    container_name: stock-daily-update
    volumes:
      - ./logs:/app/logs
      - ../data:/app/data
    environment:
      - TZ=Asia/Shanghai
    restart: unless-stopped
    command: >
      sh -c "mkdir -p /app/logs && touch /app/logs/cron.log && cron && tail -f /app/logs/cron.log" 